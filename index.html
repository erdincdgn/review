<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ozgur Dogan - English Grammar Practice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #4a6bdf;
            --primary-dark: #3a5bcf;
            --secondary: #48bb78;
            --danger: #f56565;
            --warning: #ed8936;
            --dark: #2d3748;
            --light: #f7fafc;
            --gray: #718096;
            --success: #48bb78;
            --bg-gradient: linear-gradient(135deg, #4a6bdf 0%, #8e44ad 100%);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #4a6bdf 0%, #8e44ad 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        .background-shapes {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            overflow: hidden;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 20s infinite ease-in-out;
        }

        .shape:nth-child(1) {
            width: 80px;
            height: 80px;
            left: 10%;
            animation-delay: 0s;
        }

        .shape:nth-child(2) {
            width: 120px;
            height: 120px;
            right: 20%;
            animation-delay: 2s;
        }

        .shape:nth-child(3) {
            width: 60px;
            height: 60px;
            left: 70%;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            33% {
                transform: translateY(-100px) rotate(120deg);
            }
            66% {
                transform: translateY(100px) rotate(240deg);
            }
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
            overflow: hidden;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            background: var(--bg-gradient);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .quiz-container {
            padding: 40px;
        }

        .start-screen, .result-screen {
            text-align: center;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .category-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .category-card {
            background: linear-gradient(135deg, #4a6bdf 0%, #8e44ad 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .category-card:hover::before {
            transform: translateX(0);
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(74, 107, 223, 0.4);
        }

        .category-card h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .category-card p {
            opacity: 0.9;
        }

        .quiz-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .progress-bar {
            flex: 1;
            height: 10px;
            background: #e2e8f0;
            border-radius: 5px;
            overflow: hidden;
            margin: 0 20px;
        }

        .progress-fill {
            height: 100%;
            background: var(--bg-gradient);
            transition: width 0.3s ease;
            border-radius: 5px;
        }

        .timer {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2em;
            font-weight: bold;
            color: var(--dark);
        }

        .timer.warning {
            color: var(--warning);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question {
            font-size: 1.4em;
            color: var(--dark);
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .sentence-example {
            background: #f0f4ff;
            padding: 15px;
            border-left: 4px solid var(--primary);
            margin: 15px 0;
            font-style: italic;
            border-radius: 5px;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid transparent;
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background: linear-gradient(90deg, rgba(74, 107, 223, 0.1), rgba(142, 68, 173, 0.1));
            transition: width 0.3s ease;
        }

        .option:hover::before {
            width: 100%;
        }

        .option:hover {
            transform: translateX(5px);
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(74, 107, 223, 0.2);
        }

        .option.selected {
            background: linear-gradient(135deg, rgba(74, 107, 223, 0.1), rgba(142, 68, 173, 0.1));
            border-color: var(--primary);
        }

        .option.correct {
            background: rgba(72, 187, 120, 0.1);
            border-color: var(--success);
        }

        .option.incorrect {
            background: rgba(245, 101, 101, 0.1);
            border-color: var(--danger);
        }

        .option-label {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 15px;
            font-weight: bold;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: var(--bg-gradient);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(74, 107, 223, 0.3);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: var(--dark);
        }

        .btn-secondary:hover {
            background: #cbd5e0;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-label {
            color: var(--gray);
            margin-top: 5px;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            margin: 30px auto;
            position: relative;
        }

        .score-circle svg {
            transform: rotate(-90deg);
        }

        .score-circle text {
            fill: var(--dark);
            font-size: 3em;
            font-weight: bold;
        }

        .review-answers {
            margin-top: 30px;
            max-height: 400px;
            overflow-y: auto;
        }

        .review-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .review-question {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .review-answer {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .review-answer.correct {
            color: var(--success);
        }

        .review-answer.incorrect {
            color: var(--danger);
        }

        .icon {
            width: 20px;
            height: 20px;
        }

        .grammar-tip {
            background: #e6f7ff;
            border-left: 4px solid #1890ff;
            padding: 10px 15px;
            margin-top: 10px;
            border-radius: 5px;
            font-size: 0.9em;
            color: #0050b3;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .quiz-container {
                padding: 20px;
            }

            .question {
                font-size: 1.2em;
            }

            .category-selection {
                grid-template-columns: 1fr;
            }
        }

        .hidden {
            display: none;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div class="background-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <div class="container">
        <header class="header">
            <h1>üìù GrammarMaster</h1>
            <p>Master English Grammar Through Interactive Practice</p>
        </header>

        <div class="quiz-container">
            <!-- Start Screen -->
            <div id="startScreen" class="start-screen">
                <h2 style="margin-bottom: 20px; color: var(--dark);">Choose a Grammar Topic</h2>
                <div class="category-selection">
                    <div class="category-card" onclick="startQuiz('partsOfSpeech')">
                        <h3>üìö Parts of Speech</h3>
                        <p>10 Questions</p>
                    </div>
                    <div class="category-card" onclick="startQuiz('tenses')">
                        <h3>‚è∞ Tenses</h3>
                        <p>10 Questions</p>
                    </div>
                    <div class="category-card" onclick="startQuiz('punctuation')">
                        <h3>‚úèÔ∏è Punctuation</h3>
                        <p>10 Questions</p>
                    </div>
                    <div class="category-card" onclick="startQuiz('sentenceStructure')">
                        <h3>üèóÔ∏è Sentence Structure</h3>
                        <p>10 Questions</p>
                    </div>
                </div>
            </div>

            <!-- Quiz Screen -->
            <div id="quizScreen" class="hidden">
                <div class="quiz-info">
                    <span id="questionNumber">Question 1 of 10</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="timer" id="timer">
                        <span>‚è±Ô∏è</span>
                        <span id="timeDisplay">30</span>
                    </div>
                </div>

                <div class="question-container">
                    <div class="question" id="questionText"></div>
                    <div class="sentence-example" id="sentenceExample"></div>
                    <div class="options" id="optionsContainer"></div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousQuestion()" id="prevBtn">Previous</button>
                    <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn">Next</button>
                </div>
            </div>

            <!-- Result Screen -->
            <div id="resultScreen" class="result-screen hidden">
                <h2 style="margin-bottom: 20px; color: var(--dark);">Grammar Practice Complete!</h2>
                
                <div class="score-circle">
                    <svg width="200" height="200">
                        <circle cx="100" cy="100" r="90" fill="none" stroke="#e2e8f0" stroke-width="20"/>
                        <circle id="scoreCircle" cx="100" cy="100" r="90" fill="none" stroke="url(#gradient)" stroke-width="20" stroke-dasharray="565" stroke-dashoffset="565" stroke-linecap="round"/>
                        <defs>
                            <linearGradient id="gradient">
                                <stop offset="0%" stop-color="#4a6bdf"/>
                                <stop offset="100%" stop-color="#8e44ad"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <text x="100" y="110" text-anchor="middle" id="scorePercentage">0%</text>
                </div>

                <div class="result-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Correct</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="wrongAnswers">0</div>
                        <div class="stat-label">Wrong</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="timeTaken">0s</div>
                        <div class="stat-label">Time Taken</div>
                    </div>
                </div>

                <div class="review-answers" id="reviewAnswers"></div>

                <div style="margin-top: 30px; display: flex; gap: 15px; justify-content: center;">
                    <button class="btn btn-primary" onclick="restartQuiz()">Try Again</button>
                    <button class="btn btn-secondary" onclick="backToMenu()">Back to Menu</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Grammar Quiz Data
        const quizData = {
            partsOfSpeech: [
                {
                    question: "Identify the part of speech for the word 'quickly' in the sentence: 'She runs quickly.'",
                    sentence: "She runs quickly.",
                    options: ["Noun", "Adjective", "Adverb", "Verb"],
                    correct: 2,
                    tip: "Adverbs modify verbs, adjectives, or other adverbs. 'Quickly' describes how she runs."
                },
                {
                    question: "Which word in the sentence is a preposition? 'The book is on the table.'",
                    sentence: "The book is on the table.",
                    options: ["book", "is", "on", "table"],
                    correct: 2,
                    tip: "Prepositions show relationships between nouns and other words. Common prepositions include on, in, at, by, for."
                },
                {
                    question: "Identify the conjunction in this sentence: 'I wanted to go, but I was too tired.'",
                    sentence: "I wanted to go, but I was too tired.",
                    options: ["wanted", "but", "too", "tired"],
                    correct: 1,
                    tip: "Conjunctions connect words, phrases, or clauses. Common conjunctions include and, but, or, so, yet."
                },
                {
                    question: "What part of speech is the word 'beautiful' in: 'She has beautiful hair.'?",
                    sentence: "She has beautiful hair.",
                    options: ["Adverb", "Noun", "Adjective", "Verb"],
                    correct: 2,
                    tip: "Adjectives modify nouns or pronouns. 'Beautiful' describes the noun 'hair'."
                },
                {
                    question: "Identify the pronoun in this sentence: 'They went to the store after school.'",
                    sentence: "They went to the store after school.",
                    options: ["went", "store", "after", "They"],
                    correct: 3,
                    tip: "Pronouns replace nouns. Common pronouns include he, she, it, they, we, I, you."
                },
                {
                    question: "Which word is an article in this sentence? 'A cat sat on the windowsill.'",
                    sentence: "A cat sat on the windowsill.",
                    options: ["cat", "sat", "A", "windowsill"],
                    correct: 2,
                    tip: "Articles are a type of determiner. The three articles are 'a', 'an', and 'the'."
                },
                {
                    question: "What part of speech is 'happiness' in the sentence: 'Happiness is important.'?",
                    sentence: "Happiness is important.",
                    options: ["Verb", "Adjective", "Adverb", "Noun"],
                    correct: 3,
                    tip: "Nouns represent people, places, things, or ideas. 'Happiness' is an abstract noun representing an idea."
                },
                {
                    question: "Identify the interjection in this sentence: 'Wow! That was amazing.'",
                    sentence: "Wow! That was amazing.",
                    options: ["Wow", "That", "was", "amazing"],
                    correct: 0,
                    tip: "Interjections express emotion and are often followed by exclamation points. Examples include Wow, Oh, Oops, Hey."
                },
                {
                    question: "Which word is a verb in this sentence? 'The children play in the park every day.'",
                    sentence: "The children play in the park every day.",
                    options: ["children", "play", "park", "day"],
                    correct: 1,
                    tip: "Verbs express action or state of being. 'Play' is an action verb in this sentence."
                },
                {
                    question: "What part of speech is 'very' in the sentence: 'The movie was very interesting.'?",
                    sentence: "The movie was very interesting.",
                    options: ["Adjective", "Noun", "Adverb", "Preposition"],
                    correct: 2,
                    tip: "'Very' is an adverb that intensifies the adjective 'interesting'. Adverbs that intensify are called intensifiers."
                }
            ],
            tenses: [
                {
                    question: "Choose the correct verb form: 'She _____ to the store yesterday.'",
                    sentence: "She _____ to the store yesterday.",
                    options: ["go", "goes", "went", "going"],
                    correct: 2,
                    tip: "The word 'yesterday' indicates past tense, so we use the simple past form 'went'."
                },
                {
                    question: "Which sentence uses the present perfect tense correctly?",
                    sentence: "",
                    options: [
                        "I have seen that movie last week.",
                        "She has been studying for three hours.",
                        "They have completed the project tomorrow.",
                        "He has ate breakfast this morning."
                    ],
                    correct: 1,
                    tip: "Present perfect (have/has + past participle) connects past to present. 'Has been studying' shows an action that started in the past and continues to the present."
                },
                {
                    question: "Select the correct future tense form: 'By next year, I _____ my degree.'",
                    sentence: "By next year, I _____ my degree.",
                    options: ["will complete", "will have completed", "will be completing", "completes"],
                    correct: 1,
                    tip: "Future perfect tense (will have + past participle) indicates an action that will be completed before a specific time in the future."
                },
                {
                    question: "Which sentence uses the past continuous tense correctly?",
                    sentence: "",
                    options: [
                        "I was reading when the phone rang.",
                        "She is cooking dinner right now.",
                        "They will be watching TV at 8 PM.",
                        "He had been working all day."
                    ],
                    correct: 0,
                    tip: "Past continuous (was/were + -ing) describes an ongoing action in the past that was interrupted by another action."
                },
                {
                    question: "Choose the correct present tense form: 'The train _____ at 6 AM every day.'",
                    sentence: "The train _____ at 6 AM every day.",
                    options: ["leave", "leaves", "leaving", "is leaving"],
                    correct: 1,
                    tip: "For habits and routines, we use the simple present tense. With third-person singular subjects (he, she, it), we add '-s' to the verb."
                },
                {
                    question: "Which sentence uses the future continuous tense correctly?",
                    sentence: "",
                    options: [
                        "I will study tomorrow.",
                        "She will have finished by then.",
                        "They will be traveling this time next week.",
                        "He will has arrived by 5 PM."
                    ],
                    correct: 2,
                    tip: "Future continuous (will be + -ing) describes an action that will be in progress at a specific time in the future."
                },
                {
                    question: "Select the correct past perfect form: 'By the time we arrived, they _____.'",
                    sentence: "By the time we arrived, they _____.",
                    options: ["left", "had left", "have left", "leave"],
                    correct: 1,
                    tip: "Past perfect (had + past participle) describes an action that was completed before another action in the past."
                },
                {
                    question: "Which sentence uses the present perfect continuous correctly?",
                    sentence: "",
                    options: [
                        "I have been waiting here for two hours.",
                        "She had been working before she quit.",
                        "They will be playing tennis tomorrow.",
                        "He is studying right now."
                    ],
                    correct: 0,
                    tip: "Present perfect continuous (have/has been + -ing) emphasizes the duration of an action that started in the past and continues to the present."
                },
                {
                    question: "Choose the correct verb form: 'If I _____ rich, I would travel the world.'",
                    sentence: "If I _____ rich, I would travel the world.",
                    options: ["am", "was", "were", "will be"],
                    correct: 2,
                    tip: "This is a second conditional sentence (hypothetical situation). In if-clauses of second conditionals, we use 'were' for all subjects."
                },
                {
                    question: "Which sentence uses the future perfect continuous correctly?",
                    sentence: "",
                    options: [
                        "By next year, I will have been working here for ten years.",
                        "She will be studying when we arrive.",
                        "They will complete the project by Friday.",
                        "He has been waiting for an hour."
                    ],
                    correct: 0,
                    tip: "Future perfect continuous (will have been + -ing) emphasizes the duration of an action up to a specific point in the future."
                }
            ],
            punctuation: [
                {
                    question: "Which sentence is punctuated correctly?",
                    sentence: "",
                    options: [
                        "My favorite colors are blue red and green.",
                        "My favorite colors are blue, red, and green.",
                        "My favorite colors are blue red, and green.",
                        "My favorite colors are, blue, red, and green."
                    ],
                    correct: 1,
                    tip: "Use commas to separate items in a list of three or more. Place a comma before the conjunction 'and' in a list (Oxford comma)."
                },
                {
                    question: "Choose the correctly punctuated sentence:",
                    sentence: "",
                    options: [
                        "Its a beautiful day isnt it",
                        "It's a beautiful day, isn't it?",
                        "Its a beautiful day, isn't it?",
                        "It's a beautiful day, isnt it."
                    ],
                    correct: 1,
                    tip: "Use an apostrophe in contractions (it's = it is). Use a comma before a tag question and end with a question mark."
                },
                {
                    question: "Which sentence uses the semicolon correctly?",
                    sentence: "",
                    options: [
                        "I have a big test tomorrow; I can't go out tonight.",
                        "I have a big test tomorrow; but I can't go out tonight.",
                        "I have a big test tomorrow; and I can't go out tonight.",
                        "I have a big test tomorrow; because I can't go out tonight."
                    ],
                    correct: 0,
                    tip: "Use a semicolon to connect two closely related independent clauses. Don't use a semicolon with coordinating conjunctions like but, and, or because."
                },
                {
                    question: "Select the correctly punctuated sentence:",
                    sentence: "",
                    options: [
                        "The book which I read yesterday was interesting.",
                        "The book, which I read yesterday, was interesting.",
                        "The book which I read yesterday, was interesting.",
                        "The book, which I read yesterday was interesting."
                    ],
                    correct: 1,
                    tip: "Use commas to set off non-restrictive clauses (clauses that add extra information but aren't essential to the sentence's meaning)."
                },
                {
                    question: "Which sentence is punctuated correctly for direct address?",
                    sentence: "",
                    options: [
                        "John can you help me with this?",
                        "John, can you help me with this?",
                        "John can you help me with this.",
                        "John, can you help me with this."
                    ],
                    correct: 1,
                    tip: "When directly addressing someone, place a comma after their name. End the sentence with appropriate punctuation based on whether it's a question or statement."
                },
                {
                    question: "Choose the correctly punctuated sentence with quotations:",
                    sentence: "",
                    options: [
                        "\"I'm leaving now\" she said.",
                        "\"I'm leaving now,\" she said.",
                        "\"I'm leaving now\" she said.",
                        "\"I'm leaving now\" she said."
                    ],
                    correct: 1,
                    tip: "Place commas and periods inside quotation marks. Use a comma to separate dialogue from the attribution (she said)."
                },
                {
                    question: "Which sentence uses the colon correctly?",
                    sentence: "",
                    options: [
                        "I need to buy: milk, eggs, and bread.",
                        "The ingredients are: milk, eggs, and bread.",
                        "I need to buy milk, eggs, and bread.",
                        "I need to buy milk, eggs: and bread."
                    ],
                    correct: 2,
                    tip: "Don't use a colon after a verb like 'are' or 'buy'. Use a colon after a complete sentence to introduce a list, explanation, or quotation."
                },
                {
                    question: "Select the correctly punctuated sentence:",
                    sentence: "",
                    options: [
                        "Her birthday is June 15 1995.",
                        "Her birthday is June 15, 1995.",
                        "Her birthday is June 15, 1995,",
                        "Her birthday is June, 15, 1995."
                    ],
                    correct: 1,
                    tip: "Use a comma to separate the day and year in a date. Don't use a comma between the month and day."
                },
                {
                    question: "Which sentence correctly uses parentheses?",
                    sentence: "",
                    options: [
                        "The meeting (which was scheduled for Monday) has been postponed.",
                        "The meeting (which was scheduled for Monday), has been postponed.",
                        "The meeting, (which was scheduled for Monday) has been postponed.",
                        "The meeting (which was scheduled for Monday has been postponed)."
                    ],
                    correct: 0,
                    tip: "Use parentheses to enclose additional information that's not essential to the sentence. Place the period outside the closing parenthesis."
                },
                {
                    question: "Choose the correctly punctuated sentence with an apostrophe:",
                    sentence: "",
                    options: [
                        "The students books are on the table.",
                        "The student's books are on the table.",
                        "The students' books are on the table.",
                        "The students books' are on the table."
                    ],
                    correct: 2,
                    tip: "Use an apostrophe to show possession. For plural nouns ending in -s, add only an apostrophe after the -s (students')."
                }
            ],
            sentenceStructure: [
                {
                    question: "Identify the sentence type: 'Although it was raining, we went for a walk.'",
                    sentence: "Although it was raining, we went for a walk.",
                    options: ["Simple", "Compound", "Complex", "Compound-Complex"],
                    correct: 2,
                    tip: "A complex sentence has one independent clause and at least one dependent clause. 'Although it was raining' is the dependent clause."
                },
                {
                    question: "Which sentence is a simple sentence?",
                    sentence: "",
                    options: [
                        "She studied hard, but she didn't pass the test.",
                        "Because she studied hard, she passed the test.",
                        "She studied hard for the test.",
                        "She studied hard, and she passed the test, so she celebrated."
                    ],
                    correct: 2,
                    tip: "A simple sentence has one independent clause with one subject-verb combination. 'She studied' is the subject-verb pair."
                },
                {
                    question: "Identify the sentence type: 'I wanted to go to the party, but I was too tired, so I stayed home.'",
                    sentence: "I wanted to go to the party, but I was too tired, so I stayed home.",
                    options: ["Simple", "Compound", "Complex", "Compound-Complex"],
                    correct: 1,
                    tip: "A compound sentence has at least two independent clauses joined by coordinating conjunctions (for, and, nor, but, or, yet, so)."
                },
                {
                    question: "Which sentence has a compound subject?",
                    sentence: "",
                    options: [
                        "The dog barked loudly.",
                        "Mary and John went to the park.",
                        "The teacher who is new is very kind.",
                        "She sang and danced beautifully."
                    ],
                    correct: 1,
                    tip: "A compound subject has two or more subjects connected by a coordinating conjunction. 'Mary and John' is the compound subject."
                },
                {
                    question: "Identify the sentence type: 'After she finished her homework, she watched TV, and then she went to bed.'",
                    sentence: "After she finished her homework, she watched TV, and then she went to bed.",
                    options: ["Simple", "Compound", "Complex", "Compound-Complex"],
                    correct: 3,
                    tip: "A compound-complex sentence has at least two independent clauses and at least one dependent clause."
                },
                {
                    question: "Which sentence has a compound predicate?",
                    sentence: "",
                    options: [
                        "The cat and dog played together.",
                        "She laughed and cried during the movie.",
                        "The students who studied hard passed the test.",
                        "When the rain stopped, we went outside."
                    ],
                    correct: 1,
                    tip: "A compound predicate has two or more verbs connected by a coordinating conjunction that share the same subject. 'Laughed and cried' is the compound predicate."
                },
                {
                    question: "Identify the fragment in this group:",
                    sentence: "",
                    options: [
                        "The students studied for the exam.",
                        "Because it was raining outside.",
                        "She bought groceries at the store.",
                        "They arrived early for the meeting."
                    ],
                    correct: 1,
                    tip: "A sentence fragment is an incomplete sentence. 'Because it was raining outside' is a dependent clause that cannot stand alone as a complete sentence."
                },
                {
                    question: "Which sentence is a run-on sentence?",
                    sentence: "",
                    options: [
                        "I went to the store, and I bought milk.",
                        "She likes coffee, he prefers tea.",
                        "The children played in the park until sunset.",
                        "When the alarm rang, I woke up immediately."
                    ],
                    correct: 1,
                    tip: "A run-on sentence incorrectly joins two independent clauses without proper punctuation or conjunction. 'She likes coffee, he prefers tea' needs a period or semicolon."
                },
                {
                    question: "Identify the sentence with correct parallel structure:",
                    sentence: "",
                    options: [
                        "She likes hiking, swimming, and to ride bikes.",
                        "She likes to hike, to swim, and to ride bikes.",
                        "She likes hiking, swimming, and bike riding.",
                        "She likes to hike, swimming, and bike riding."
                    ],
                    correct: 2,
                    tip: "Parallel structure uses the same pattern of words to show that two or more ideas have the same level of importance. 'Hiking, swimming, and bike riding' all use the -ing form."
                },
                {
                    question: "Which sentence uses correct subject-verb agreement?",
                    sentence: "",
                    options: [
                        "The list of items were on the table.",
                        "Each of the students have a textbook.",
                        "The team of players is practicing now.",
                        "Neither the teacher nor the students were present."
                    ],
                    correct: 2,
                    tip: "When a subject is separated from its verb by a prepositional phrase, the verb agrees with the subject, not the noun in the phrase. 'Team' is singular, so use 'is'."
                }
            ]
        };

        // Game State
        let currentCategory = '';
        let currentQuestion = 0;
        let score = 0;
        let answers = [];
        let timer = null;
        let timeLeft = 30;
        let totalTime = 0;
        let quizStartTime = 0;

        // Initialize
        function init() {
            loadHighScores();
        }

        // Start Quiz
        function startQuiz(category) {
            currentCategory = category;
            currentQuestion = 0;
            score = 0;
            answers = [];
            totalTime = 0;
            quizStartTime = Date.now();
            
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('quizScreen').classList.remove('hidden');
            document.getElementById('resultScreen').classList.add('hidden');
            
            loadQuestion();
            startTimer();
        }

        // Load Question
        function loadQuestion() {
            const questions = quizData[currentCategory];
            const question = questions[currentQuestion];
            
            document.getElementById('questionNumber').textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
            document.getElementById('questionText').textContent = question.question;
            
            // Display sentence example if available
            const sentenceExample = document.getElementById('sentenceExample');
            if (question.sentence) {
                sentenceExample.textContent = question.sentence;
                sentenceExample.style.display = 'block';
            } else {
                sentenceExample.style.display = 'none';
            }
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.onclick = () => selectOption(index);
                
                const label = document.createElement('span');
                label.className = 'option-label';
                label.textContent = String.fromCharCode(65 + index);
                
                const text = document.createElement('span');
                text.textContent = option;
                
                optionDiv.appendChild(label);
                optionDiv.appendChild(text);
                optionsContainer.appendChild(optionDiv);
            });
            
            updateProgress();
            updateNavigationButtons();
            
            // Reset timer for new question
            timeLeft = 30;
            updateTimerDisplay();
        }

        // Select Option
        function selectOption(index) {
            const options = document.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            options[index].classList.add('selected');
            
            answers[currentQuestion] = index;
        }

        // Next Question
        function nextQuestion() {
            const questions = quizData[currentCategory];
            
            if (answers[currentQuestion] === undefined) {
                showNotification('Please select an answer!');
                return;
            }
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                loadQuestion();
            } else {
                endQuiz();
            }
        }

        // Previous Question
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
                
                // Restore previous selection
                if (answers[currentQuestion] !== undefined) {
                    const options = document.querySelectorAll('.option');
                    options[answers[currentQuestion]].classList.add('selected');
                }
            }
        }

        // Update Progress Bar
        function updateProgress() {
            const questions = quizData[currentCategory];
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Update Navigation Buttons
        function updateNavigationButtons() {
            const questions = quizData[currentCategory];
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').textContent = 
                currentQuestion === questions.length - 1 ? 'Finish' : 'Next';
        }

        // Timer Functions
        function startTimer() {
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                totalTime++;
                updateTimerDisplay();
                
                if (timeLeft <= 10) {
                    document.getElementById('timer').classList.add('warning');
                } else {
                    document.getElementById('timer').classList.remove('warning');
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    autoSubmit();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            document.getElementById('timeDisplay').textContent = timeLeft;
        }

        function autoSubmit() {
            if (answers[currentQuestion] === undefined) {
                answers[currentQuestion] = -1; // Mark as unanswered
            }
            
            const questions = quizData[currentCategory];
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                loadQuestion();
                startTimer();
            } else {
                endQuiz();
            }
        }

        // End Quiz
        function endQuiz() {
            clearInterval(timer);
            
            const questions = quizData[currentCategory];
            let correct = 0;
            
            answers.forEach((answer, index) => {
                if (answer === questions[index].correct) {
                    correct++;
                }
            });
            
            score = correct;
            showResults();
        }

        // Show Results
        function showResults() {
            document.getElementById('quizScreen').classList.add('hidden');
            document.getElementById('resultScreen').classList.remove('hidden');
            
            const questions = quizData[currentCategory];
            const percentage = Math.round((score / questions.length) * 100);
            
            // Update score circle
            const circumference = 2 * Math.PI * 90;
            const offset = circumference - (percentage / 100) * circumference;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDashoffset = offset;
            scoreCircle.style.transition = 'stroke-dashoffset 1s ease-out';
            
            document.getElementById('scorePercentage').textContent = percentage + '%';
            document.getElementById('correctAnswers').textContent = score;
            document.getElementById('wrongAnswers').textContent = questions.length - score;
            document.getElementById('timeTaken').textContent = totalTime + 's';
            
            // Generate review
            const reviewContainer = document.getElementById('reviewAnswers');
            reviewContainer.innerHTML = '<h3 style="margin-bottom: 20px;">Review Your Answers</h3>';
            
            questions.forEach((question, index) => {
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                
                const isCorrect = answers[index] === question.correct;
                const userAnswer = answers[index] !== undefined && answers[index] !== -1 ? 
                    question.options[answers[index]] : 'Not answered';
                const correctAnswer = question.options[question.correct];
                
                let reviewHTML = `
                    <div class="review-question">Q${index + 1}: ${question.question}</div>
                    ${question.sentence ? `<div class="sentence-example">${question.sentence}</div>` : ''}
                    <div class="review-answer ${isCorrect ? 'correct' : 'incorrect'}">
                        <span class="icon">${isCorrect ? '‚úì' : '‚úó'}</span>
                        <span>Your answer: ${userAnswer}</span>
                        ${!isCorrect ? `<br><span>Correct answer: ${correctAnswer}</span>` : ''}
                    </div>
                `;
                
                // Add grammar tip if available and answer was incorrect
                if (!isCorrect && question.tip) {
                    reviewHTML += `<div class="grammar-tip"><strong>Grammar Tip:</strong> ${question.tip}</div>`;
                }
                
                reviewItem.innerHTML = reviewHTML;
                reviewContainer.appendChild(reviewItem);
            });
            
            saveHighScore();
        }

        // Restart Quiz
        function restartQuiz() {
            startQuiz(currentCategory);
        }

        // Back to Menu
        function backToMenu() {
            document.getElementById('startScreen').classList.remove('hidden');
            document.getElementById('quizScreen').classList.add('hidden');
            document.getElementById('resultScreen').classList.add('hidden');
        }

        // Show Notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--danger);
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                z-index: 1000;
                animation: slideIn 0.3s ease-out;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        // High Scores
        function saveHighScore() {
            const highScores = JSON.parse(localStorage.getItem('grammarHighScores') || '{}');
            const category = currentCategory;
            
            if (!highScores[category] || score > highScores[category].score) {
                highScores[category] = {
                    score: score,
                    percentage: Math.round((score / quizData[category].length) * 100),
                    date: new Date().toLocaleDateString()
                };
                localStorage.setItem('grammarHighScores', JSON.stringify(highScores));
            }
        }

        function loadHighScores() {
            // This could be used to display high scores on the start screen
        }

        // Keyboard Navigation
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('quizScreen').classList.contains('hidden')) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const index = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option');
                if (options[index]) {
                    selectOption(index);
                }
            } else if (e.key === 'Enter') {
                nextQuestion();
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight') {
                nextQuestion();
            }
        });

        // Initialize on load
        init();
    </script>
</body>
</html>